@startuml Film Sonar - Patrones de Dise√±o Simplificado

!theme plain
skinparam classAttributeIconSize 0
skinparam classFontSize 14
skinparam classFontStyle bold
skinparam packageStyle rectangle
skinparam backgroundColor #FEFEFE
skinparam roundcorner 15

package "üéØ STRATEGY PATTERN" {
  interface RecommendationStrategy {
    +recommend()
    +calculate_score()
  }

  class GenreStrategy {
    +recommend()
    +calculate_score()
  }

  class DirectorStrategy {
    +recommend()
    +calculate_score()
  }

  class RecommendationService {
    -strategies: Array
    +generate_recommendations()
  }

  RecommendationStrategy <|.. GenreStrategy
  RecommendationStrategy <|.. DirectorStrategy
  RecommendationService --> RecommendationStrategy
}

package "üóÑÔ∏è REPOSITORY PATTERN" {
  class MovieRepository {
    +find_by_filters()
    +find_similar()
    +find_top_movies()
  }

  class MoviesController {
    -movie_repository: MovieRepository
    +index()
  }

  MoviesController --> MovieRepository
}

package "üèóÔ∏è TEMPLATE METHOD" {
  class ApplicationController {
    +authorize_manager!()
  }

  class Api::V1::BaseController {
    +authenticate_user!()
    +render_success()
    +render_error()
  }

  class Api::V1::MoviesController {
    +index()
    +show()
  }

  ApplicationController <|-- Api::V1::BaseController
  Api::V1::BaseController <|-- Api::V1::MoviesController
}

package "üîó OBSERVER PATTERN" {
  class ExternalRating {
    +update_movie_weighted_score()
  }

  class Movie {
    +update_weighted_score!()
  }

  ExternalRating --> Movie : "notifica cambios"
}

note as N1
  <b>Beneficios de los Patrones:</b>
  ‚Ä¢ <b>Strategy:</b> F√°cil agregar nuevas estrategias
  ‚Ä¢ <b>Repository:</b> Centraliza acceso a datos
  ‚Ä¢ <b>Template Method:</b> Reutilizaci√≥n de c√≥digo
  ‚Ä¢ <b>Observer:</b> Actualizaci√≥n autom√°tica
end note

@enduml 